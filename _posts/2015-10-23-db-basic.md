---
layout: post
title: 数据库基本知识
category: db
comments: false
---
###1、事务及ACID

事务是用户程序的执行，对DBMS来说，是一个读写操作的序列。

事务应该具有四个主要特性：  

- 原子性：所有操作要么全部被执行，要么不被执行。
- 一致性：每个单独执行的事务，当它不与其他事务并发执行的情况下，要保证数据库的一致性。
- 隔离性：若干事务交叉执行，用户不需要考虑并发执行的其他事务的影响。事务都是独立的。
- 持久性：一旦通知事务执行成功，那么即便在数据更新存入磁盘之前发生系统故障，事务的处理结构也能永久保存。

###2、clustered and non-clustered indexes(聚簇索引和非聚簇索引）
聚簇索引：聚簇顺序就是数据的物理存储顺序。  
非聚簇索引：索引顺序与数据物理排列顺序无关。

一个表最多只能有一个聚簇索引。

在SQL server中，索引是通过二叉树的数据结构来描述的，可以这样理解聚簇索引：索引的叶节点就是数据节点，而非聚簇索引的叶节点仍然是索引节点，只不过有一个指针指向对应的数据块。

前者想电话本，按姓氏排列；后者像课本中的索引，有指针（页码）。

###3、游标和判断是否到最后。
游标用于定位结果集的行。  
通过判断@@FETCH_STATUS，可以判断游标是否到最后（不为0）。

